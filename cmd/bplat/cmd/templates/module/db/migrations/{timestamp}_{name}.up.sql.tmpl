-- Migration: Create {{.TableName}} table
-- Generated by bplat generate module

CREATE TABLE {{.TableName}} (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    -- TODO: Add your columns here
    -- Example:
    -- name VARCHAR(255) NOT NULL,
    -- description TEXT,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- Add updated_at trigger (assumes update_updated_at_column function exists)
-- If this function doesn't exist, create it first:
-- CREATE OR REPLACE FUNCTION update_updated_at_column()
-- RETURNS TRIGGER AS $$
-- BEGIN
--     NEW.updated_at = NOW();
--     RETURN NEW;
-- END;
-- $$ language 'plpgsql';

CREATE TRIGGER set_{{.TableName}}_updated_at
    BEFORE UPDATE ON {{.TableName}}
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
