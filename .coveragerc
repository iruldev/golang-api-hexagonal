# Coverage Configuration for golang-api-hexagonal
# ================================================
# This file documents the coverage configuration and exclusions for the project.
# Go doesn't use a .coveragerc file like Python - this serves as documentation.
#
# Coverage is enforced in the Makefile and CI workflow.
# Run `make coverage` to check coverage thresholds.

# COVERAGE THRESHOLD
# ==================
# Minimum coverage required: 80%
# Target packages: internal/domain/..., internal/app/...
# Configured via: COVERAGE_THRESHOLD variable in Makefile (default: 80)

# INCLUDED PACKAGES
# =================
# Only domain and application layers are subject to coverage requirements:
# - internal/domain/...    # Pure business entities, value objects, domain errors
# - internal/app/...       # Use cases, application services, business logic

# EXCLUDED PACKAGES (by design)
# =============================
# These packages are NOT included in coverage calculations:
# - internal/transport/...  # HTTP handlers, middleware, routers (integration tested)
# - internal/infra/...      # Database repos, external integrations (integration tested)
# - cmd/...                 # Application entry points (main.go files)
# - test/...                # Test fixtures and test utilities

# EXCLUDED FILES (patterns)
# =========================
# The following file patterns are excluded from coverage by virtue of not being
# in the tracked packages:
#
# Pattern                               Rationale
# -------                               ---------
# internal/infra/postgres/db/*.go       Generated by sqlc, auto-generated code
# internal/testutil/mocks/*.go          Generated by mockgen, auto-generated code  
# *_test.go                             Test files (never counted in coverage)
# cmd/api/main.go                       Entry point with minimal logic
# */doc.go                              Documentation files only

# COVERAGE COMMANDS
# =================
# make coverage         - Run coverage check with threshold enforcement
# make coverage-html    - Generate HTML report for visual review
# make coverage-report  - Show per-package coverage breakdown
# make coverage-detail  - Show uncovered functions for PR review

# CI ENFORCEMENT
# ==============
# Coverage is enforced in .github/workflows/ci.yml:
# - Runs after unit tests
# - Fails PR if coverage < 80%
# - Uploads coverage.out as artifact
# - Generates HTML report for review

# RATIONALE FOR 80% THRESHOLD
# ===========================
# Per NFR-MAINT-1: "Test Coverage â‰¥80% for domain + application layers"
#
# Why domain + app layers only:
# 1. These contain business logic that must be thoroughly tested
# 2. Transport/infra layers are better tested via integration tests
# 3. Generated code (sqlc, mocks) shouldn't count against coverage
#
# Why 80%:
# 1. High enough to ensure quality
# 2. Low enough to not block legitimate work
# 3. Industry best practice for business logic layers
